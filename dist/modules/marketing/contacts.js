"use strict";function Contact(t,e){this.logger=t,this.sender=e,this.lists=contactLists(this.logger,this.sender),this.DATATYPE_STR="str",this.DATATYPE_INT="int",this.DATATYPE_FLOAT="float",this.DATATYPE_BOOL="bool",this.DATATYPE_NAMESPACE_STATIC="static",this.DATATYPE_NAMESPACE_HYSTORIC="historic",this.ACTION_ADD_NO_FORCE="addnoforce",this.ACTION_REMOVE="remove",this.ACTION_UNSUBSCRIBE="unsub"}var _=require("lodash"),contactLists=require("./contact/lists");Contact.prototype.create=function(t,e){return this.sender.store({Email:t,Name:e},this.sender.factory.MAILJET_TYPE).send("contact","post",3)},Contact.prototype.createAndAddToList=function(t,e,s,n,o){return this.sender.store(_.omitBy({Email:e,Name:s,ID:t,Action:o||"addnoforce",Properties:n||{}},function(t){return _.isNull(t)||_.isEmpty(t)||_.isEmpty(t)}),this.sender.factory.MAILJET_TYPE).send("contactslist","post",3,!1,"managecontact")},Contact.prototype.unsubscribe=function(t,e){return this.createAndAddToList(t,e,null,null,this.ACTION_UNSUBSCRIBE)},Contact.prototype.remove=function(t,e){return this.createAndAddToList(t,e,null,null,this.ACTION_REMOVE)},Contact.prototype.addCustomProperties=function(t,e){return this.sender.store({Datatype:e||this.DATATYPE_STR,Name:t,NameSpace:this.DATATYPE_NAMESPACE_STATIC},this.sender.factory.MAILJET_TYPE).send("contactmetadata","post",3)},module.exports=function(t,e){return(_.isUndefined(t)||_.isNull(t))&&(logger.warning("[ Contact.constructor ] - Invalid logger given. Use internal logger"),t=logger),new Contact(t,e)};