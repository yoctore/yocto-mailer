"use strict";function NodemailerTransporter(r){this.logger=r,this.transport={}}var logger=require("yocto-logger"),_=require("lodash"),nodemailer=require("nodemailer"),Q=require("q"),joi=require("joi");NodemailerTransporter.prototype.isReady=function(){var r=Q.defer();return this.transport.verify(function(e,o){return e?r.reject(e):r.resolve(o)}),r.promise},NodemailerTransporter.prototype.send=function(r){var e=Q.defer();return this.transport.sendMail(r,function(r,o){return r?e.reject(r):e.resolve(o)}),e.promise},NodemailerTransporter.prototype.create=function(r){var e=joi.object().required().keys({auth:joi.object().optional().keys({pass:joi.string().required().empty(),user:joi.string().required().empty()}),host:joi.string().required().empty(),port:joi.number().required().min(0),secure:joi.boolean().optional().default(!1),streamTransport:joi.boolean().optional().default(!1)}),o=joi.validate(r||{},e);return _.isNull(o.error)?(this.transport=nodemailer.createTransport(o.value),this):(this.logger.error(["[ NodemailerTransporter.create ] - Cannot create transport for nodemailer.","Error is :",o.error].join(" ")),!1)},module.exports=function(r){return(_.isUndefined(r)||_.isNull(r))&&(logger.warning("[ NodemailerTransporter.constructor ] - Invalid logger given. Use internal logger"),r=logger),new NodemailerTransporter(r)};